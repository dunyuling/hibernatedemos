##from:https://www.imooc.com/learn/465

##了解缓存
    + 什么是缓存
        * 并不是指计算机的内存或者CPU的一二级缓存
        * 缓存是指为了降低应用程序对物理数据源访问的频次，从而提高应用程序性能的一种策略
    + 为什么使用缓存
        * ORM框架访问数据库的效率直接影响应用程序的运行速度，提升和优化ORM框架的执行效率至关重要
        * Hibernate的缓存是提升和优化Hibernate执行效率的重要手段，所以学会Hibernate缓存的使用
            和配置是优化的关键
    
    + 原理
        物理数据源--copy-->缓存，缓存存储在内存中
                        

##掌握Hibernate一级缓存的使用
    * Hibernate一级缓存又被称为“Session缓存”，“会话级缓存”
    * 通过Session从数据库查询实体时会把实体在内存中存储起来，下一次查询同一实体时不再从数据库获取，
        而从内存中获取，这就是缓存
    * 生命周期和Session相同;Session销毁，它也销毁
    * 一级缓存中的数据适用范围在当前会话之内
    + API 
        * 一级缓存无法取消，用两个办法管理
        * evict():用于将某个对象从Session的一级缓存中清除
        * clear():用于清楚所有对象
    * 有时候影响性能        


##掌握Hibernate二级缓存的使用
    * 不同session共用数据
    + 配置
        * 添加二级缓存对应的jar(hibernate-ehcache)
        * 在hibernate.cfg.xml中添加Provider类的描述
        * 添加二级缓存属性配置文件(ehcache.xml)
        * 在X.hbm.xml中进行开启(添加<cache/>标签)
    + <cache/>(x.hbm.xml中)或者<class-cache/>(hibernate.cfg.xml中)
        + usage:指定缓存策略
            * transactional
            * read-write
            * nonstrict-read-write
            * read-only
        * region:二级缓存域名    
        + include:是否缓存延迟加载的对象。
            * all:缓存所有对象 
            * non-lazy:表示不缓存延迟加载的对象
    * 全局缓存，应用级缓存
    * 数据适用范围是当前应用的所有会话
    * 可插拔式，默认为EHCache,还支持其他二级缓存组件：
        HashTable，OSCache,SwarmCache,JBoss TreeCache
    + 使用场景
        * 很少被修改的数据
        * 不是很重要的数据，允许偶尔出现并发的数据
        * 不会被高并发访问的数据
        * 参考数据
            
            
##Hibernate一二级缓存的对比和总结
    + 对比
        + 缓存范围
            * 一级缓存： 事务范围，每个事务都拥有单独一级缓存
            * 二级缓存： 应用范围，当前应用内所有事务共享
        + 并发访问策略
            * 一级缓存： 无并发问题
            * 二级缓存： 必须提供适当的并发访问策略
        + 数据过期策略
            * 一级缓存： 无数据过期策略
            * 二级缓存： 缓存对象的最大数目，最长时间，最长空闲时间
        + 缓存的软件实现
            * 一级缓存： 框架内
            * 二级缓存： 第三方提供，可插拔集成
        + 物理介质
            * 一级缓存： 内存
            * 二级缓存： 内存和硬盘
        + 启用方式
            * 一级缓存：默认启用，不可关闭 
            * 二级缓存：默认不启用，选择性开启 
           
    + 总结
        * 提高检索效率
        * 一级缓存为会话级缓存，二级缓存为应用级缓存
        * 增加服务器消耗，所以要注意缓存策略                                                                    
        